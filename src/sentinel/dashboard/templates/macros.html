{# Security audit complete - no external links (target="_blank") in this template #}
{# Reusable Jinja2 macros for badge and display components #}

{#
  Macro to render a badge with automatic state-based styling.

  Determines the badge variant class based on the active/total counts:
  - badge--inactive: When active_count is 0 (nothing active)
  - badge--success: When active_count equals total_count (all active)
  - (default): When partially active (some but not all)

  @param active_count - Number of currently active items
  @param total_count - Total number of items
  @returns The badge element with appropriate styling class
#}
{% macro status_badge(active_count, total_count) %}
<span class="badge{% if active_count == 0 %} badge--inactive{% elif active_count == total_count %} badge--success{% endif %}">{{ active_count }}/{{ total_count }}</span>
{%- endmacro %}

{#
  Macro to render a success rate display with threshold-based coloring.

  Determines the display color class based on configurable thresholds:
  - status-ok (green): When rate >= green_threshold
  - status-warn (yellow): When rate >= yellow_threshold but < green_threshold
  - status-error (red): When rate < yellow_threshold

  @param rate - The success rate percentage (0-100)
  @param green_threshold - Percentage at or above which display is green (default: 90.0)
  @param yellow_threshold - Percentage at or above which display is yellow (default: 70.0)
  @returns The rate display element with appropriate styling class
#}
{% macro success_rate_display(rate, green_threshold=90.0, yellow_threshold=70.0) %}
<span class="{% if rate >= green_threshold %}status-ok{% elif rate >= yellow_threshold %}status-warn{% else %}status-error{% endif %}">{{ "%.1f" | format(rate) }}%</span>
{%- endmacro %}
